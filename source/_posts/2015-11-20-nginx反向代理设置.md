title: Nginx反向代理设置
date: 2015-11-20 12:25:49
categories: work
tags:
- nginx
- 反向代理
---

一般在应用部署中都不会直接把Web Server（如：Tomcat、Jetty等）暴露给用户，我们会在Web Server前面再加一个反向代理。这篇文章介绍的就是怎样设置Nginx来做反向代理。

## Nginx安装

以Ubuntu 14.04为例（其它系统请自行查找安装方法）。官方安装文档在：[http://nginx.org/en/download.html](http://nginx.org/en/download.html)

```
curl http://nginx.org/keys/nginx_signing.key | sudo apt-key add -

echo "deb http://nginx.org/packages/mainline/ubuntu/ trusty nginx
deb-src http://nginx.org/packages/mainline/ubuntu/ trusty nginx" | sudo tee /etc/apt/source.list.d/nginx.list

sudo apt-get update
sudo apt-get -y install nginx
```

## Nginx反向代理常用设置

在`location`段中设置反向代理，必需的设置项是：`proxy_pass`，它指定将请示转发到的地址。

- proxy_pass URL：设置被代理服务的地址或被映射的URI
- proxy_set\_header field value：设置预定义或增加字段到请求header中传到被代理的Server上。常用设置有：
    * X-Real-IP $remote_addr：代理远端IP
    * X-Forwarded-Proto $scheme：代理远端scheme，一般就是使用的协议，如：http、https、ftp

